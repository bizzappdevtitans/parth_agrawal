<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- freight order report action -->
    <data>
        <record id="report_freight" model="ir.actions.report">
            <field name="name">Freight Order Report</field>
            <field name="model">freight.order</field>
            <field name="report_type">qweb-pdf</field>
            <field name="binding_model_id" ref="model_freight_order"/>
            <field name="binding_type">report</field>
        </record>


        <!-- freight order report template -->
        <template id="report_freight_order">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <center><h2>Order Details</h2></center><br/><br/>
                        <h4><t t-esc="doc.name"/></h4><br/>
                        <div name="customer">
                            Customer:
                        </div>

                        <div name="customer_details">
                            <div t-esc="doc.shipper_id.name"/>
                        </div><br/>

                        <div name="order_status">
                            Order Status:
                            <t name="order_status_details">
                            <b><t t-esc="doc.state"/></b>
                            </t>
                        </div>
                        <br/>

                        <table class="table o_main_table">
                            <tbody>
                                <tr>
                                    <th name="loading_port">Loading Port:</th>
                                    <td name="loading"><span t-field="doc.loading_port_id.name"/></td>
                                    <th name="destination_port">Destination Port:</th>
                                    <td name="destination"><span t-field="doc.discharging_port_id.name"/></td>
                                </tr>
                                <tr>
                                    <th name="direction">Direction:</th>
                                    <td name="direction_name"><span t-field="doc.type"/></td>
                                    <th name="transport">Transport:</th>
                                    <td name="transport_name"><span t-field="doc.transport_type"/></td>
                                </tr>
                                <tr>
                                    <th name="date">Date:</th>
                                    <td name="date"><span t-field="doc.order_date"/></td>
                                    <th name="expected">Expected Date:</th>
                                    <td name="expected_name"><span t-field="doc.expected_date"/></td>
                                </tr>
                            </tbody>
                        </table>

                        <div name="orders">
                            <b>Orders:</b>
                        </div>

                        <table class="table o_main_table">
                            <thead>
                                <tr>
                                    <th name="th_container">Container</th>
                                    <th name="th_goods">Goods</th>
                                    <th name="th_billing_on">Billing On</th>
                                    <th name="th_pricing">Pricing</th>
                                    <th name="th_volume">Volume</th>
                                    <th name="th_weight">Weight</th>
                                    <th name="th_unit_price">Unit Price</th>
                                    <th name="th_total_price">Total Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.order_ids" t-as="order">
                                    <td t-esc="order.container_id.name"/>
                                    <td t-esc="order.product_id.name"/>
                                    <td><span t-field="order.billing_type"/></td>
                                    <td t-esc="order.pricing_id.name"/>
                                    <td t-esc="order.volume"/>
                                    <td t-esc="order.weight"/>
                                    <td t-esc="order.price"/>
                                    <td t-esc="order.total_price"/>
                                </tr>
                            </tbody>
                        </table>

                        <div name="route">
                            <b>Route:</b>
                        </div>

                        <table class="table o_main_table">
                            <thead>
                                <tr>
                                    <th name="th_operation">Operation</th>
                                    <th name="th_source">Source location</th>
                                    <th name="th_destination">Destination Location</th>
                                    <th name="th_transport">Transport</th>
                                    <th name="th_price">Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.route_ids" t-as="route">
                                    <td t-esc="route.operation_id.name"/>
                                    <td t-esc="route.source_loc.name"/>
                                    <td t-esc="route.destination_loc.name"/>
                                    <td><span t-field="route.transport_type"/></td>
                                    <td t-esc="route.sale"/>
                                </tr>
                            </tbody>
                        </table>


                        <div name="route">
                            <b>Service:</b>
                        </div>

                        <table class="table o_main_table">
                            <thead>
                                <tr>
                                    <th name="th_vendor">Vendor</th>
                                    <th name="th_service">Service</th>
                                    <th name="th_quantity">Quantity</th>
                                    <th name="th_sale">Sale</th>
                                    <th name="th_sale_total">Total sale</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.service_ids" t-as="service">
                                    <td t-esc="service.partner_id.name"/>
                                    <td t-esc="service.service_id.name"/>
                                    <td t-esc="service.qty"/>
                                    <td t-esc="service.sale"/>
                                    <td t-esc="service.total_sale"/>
                                </tr>
                            </tbody>
                        </table>

                    </t>
                </t>
            </t>
        </template>

    </data>
</odoo>
